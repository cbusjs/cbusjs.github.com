---
layout: default
title: Columbus JavaScript User Group
---

{% assign event = site.categories.events.first %}
<div
  id='latest-event'
  class='jumbotron'>
  <div class='container'>
    <h1>{{ event.title }}</h1>
    <p class='lead'>{{ event.tagline }}</p>
    <p>{{ event.author }}</p>

    {{ event.content }}

    <p>
      <a
        class="btn btn-primary btn-lg"
        href="{{ event.url }}">Details</a>
    </p>
  </div>
</div>

<div class='container'>
  <h1 class='main-title'>Columbus Javascript User Group</h1>
</div> <!-- /.container -->

<ul id="calendarStuff"></ul>

<script src="http://stevenlevithan.com/assets/misc/date.format.js"></script>

<script>

  var onLoadCallback = function() {

    var ul = document.getElementById('calendarStuff');

    gapi.client.setApiKey('AIzaSyDt-Cr4OxzpnxhkIF0fyjAWqVirvbBNZt0');
    gapi.client.load('calendar', 'v3', function() {

      var now = dateFormat(Date.now(), 'isoUtcDateTime');

      var request = gapi.client.calendar.events.list({ 
        calendarId: 'cbusjs@gmail.com',
        showDeleted: false,
        timeMin: now
      });
      request.execute(function(resp) {

        console.log(resp);

        resp.items.filter(function(item) {
          if (item.start === undefined) return false;
          return item.start.dateTime >= now;
        }).sort(function(a, b) {
          if (a.start.dateTime > b.start.dateTime) return 1; 
          if (a.start.dateTime < b.start.dateTime) return -11;
          return 0;
        }).forEach(function(item) {
          var li = document.createElement('li');
          li.innerText = item.summary + ', ' + item.location + ' @ ' + (item.start ? item.start.dateTime : undefined);
          ul.appendChild(li);
        });
      });
    
    });

  };

  // this magic code loads the google api
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/client.js?onload=onLoadCallback';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();

</script>
